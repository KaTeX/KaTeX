language: node_js
node_js:
- "0.11"
- "0.10"
addons:
  firefox: "28.0"
before_install:
- wget http://mirrors.kernel.org/ubuntu/pool/main/f/freetype/libfreetype6_2.5.2-1ubuntu2.2_amd64.deb
- sudo dpkg -i libfreetype6_2.5.2-1ubuntu2.2_amd64.deb
- sudo pip install selenium pypng
- "export DISPLAY=:99.0"
- "sh -e /etc/init.d/xvfb start"
before_script:
- wget http://selenium-release.storage.googleapis.com/2.42/selenium-server-standalone-2.42.2.jar
- while echo "" > /dev/tcp/127.0.0.1/4444; do sleep 1; done
- java -jar selenium-server-standalone-2.42.2.jar -port 4444 > /dev/null &
- node server.js > /dev/null &
script:
- sleep 2
- make lint test
- dockers/Screenshotter/screenshotter.py test/screenshotter/ss_data.json
- git diff --exit-code
